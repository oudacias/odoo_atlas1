<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="external_layout_standard_station">


        <div class="article o_report_layout_standard_station">
            <t t-raw="0" />
        </div>


    </template>
        <record id="paperformat_station_lowmargin" model="report.paperformat">
        <field name="name">European A4 low margin</field>
        <field name="default" eval="True"/>
        <field name="format">A4</field>
        <field name="page_height">0</field>
        <field name="page_width">0</field>
        <field name="orientation">Portrait</field>
        <field name="margin_top">5</field>
        <field name="margin_bottom">5</field>
        <field name="margin_left">5</field>
        <field name="margin_right">5</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">0</field>
        <field name="dpi">80</field>
    </record>
        <report 
            id="rapport_journalier_station_action2"
            model="petrol.station.recette"
            string="Rapport Journalier."
            report_type="qweb-pdf"
            name="petrol_station_doosys.rapport_journalier_station2"
            file="petrol_station_doosys.rapport_journalier_station2"
            paperformat="paperformat_station_lowmargin"
            print_report_name="(object._get_printed_report_name())"
        />
       </data>
       <data>
        <template id="rapport_journalier_station_template2">
   <t t-call="web.external_layout">
            <style>
                 .with_border td{padding:4px 4px;border: 1px solid black !important;border-collapse: collapse;}
                 .with_border th{padding:4px 4px;border: 1px solid black !important;border-collapse: collapse;}
                 .titre td,.titre th{
                 background-color:#a8d08d;text-align: center;    border: 1px solid !important;border-collapse: collapse;
                 }
                .table-condensed{
                width:100% ;
                border-collapse: collapse;
                }
                .activite_tbody td{
                padding:15px 3px !important
                }
                .activite_tbody td.footer{
                 padding:3px !important
                }
                span.name{
                    margin: 34px 0 0px 0;
                     display: block;
                }
             </style>

                <div class="page">
                    <table style="width: 100%;">
                        <tr>
                            <td>
                              <img src='data:image/jpeg;base64,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
'  height="78px" width="139px" style="max-height: 78px;"/>
                            </td>
                            <td style="    text-align: right;">
                                   <span t-field="o.station_id.name"/>

                            </td>
                        </tr>
                        <tr>
                            <td></td>
                            <td style="    text-align: right;"><span t-esc="context_timestamp(datetime.datetime.now()).strftime('%d/%m/%Y %H:%M')"/>  </td>
                        </tr>
                    </table>



                  <p style="font-size:16px; " align="center">Rapport Journalier du <span t-field="o.date_recette"/></p>



                <div class="row">
                <!--partie 1-->
                    <t t-set="product_carburant" t-value="[]"/>
                    <t t-foreach="o.volumconteur_ids" t-as="l">
                        <t t-if="l.product_id not in  product_carburant">
                            <t t-set="product_carburant" t-value="product_carburant+[l.product_id]"/>
                         </t>
                     </t>
                     <t t-set="total_carburant_ca" t-value="0"/>
                     <t t-foreach="set(product_carburant)" t-as="product">
                            <table class="table table-condensed" style="width:100% ;">
                                <thead>
                                    <tr>                                
                                        <th>     
                                            <table class="with_border " style="border: 1px solid black; border-collapse: collapse;width:100% ;" name="Volucompteurs">
                                                <thead>
                                                        <tr>
                                                        <th style="  border: 1px solid black;border-collapse: collapse; color:#000;background-color:#a8d08d;text-align: center; " colspan="4" align="center"><span t-esc="product.name"/></th>
                                                    </tr>
                                                    <tr>
                                                        <th style="   border: 1px solid black;border-collapse: collapse; color:#000;background-color: #ffc001;text-align: center; " align="center">Pompe</th>
                                                        <th style=" border: 1px solid black;border-collapse: collapse; color:#000;background-color: #ffc001;text-align: center;" align="center">Compt Initial</th>
                                                        <th style="   border: 1px solid black;border-collapse: collapse; color:#000;background-color: #ffc001;text-align: center;" align="center">Compt Final</th>
                                                        <th style="  border: 1px solid black;border-collapse: collapse; color:#000;background-color: #ffc001;text-align: center; " align="center">Sortie</th>
                                                    </tr>
                                                </thead>
                                                <tbody class="invoice_tbody">
                                                    <t t-set="total_sortie" t-value="0"/>
                                                    <t t-set="prix_unitaire" t-value="0"/>
                                                    <tr t-foreach="o.volumconteur_ids" t-as="l">

                                                    <t t-if="product.id==l.product_id.id">
                                                        <t t-set="total_sortie" t-value="total_sortie+l.sortie"/>
                                                        <t t-set="prix_unitaire" t-value="l.prix_unitaire"/>
                                                        <td style="  border: 1px solid black;border-collapse: collapse;padding-left: 3px;" align="left"><span t-field="l.pompe_id"/></td>
                                                        <td style="  border: 1px solid black;border-collapse: collapse;padding-left: 3px;" align="left"><span t-field="l.compteur1"/></td>
                                                        <td style="  border: 1px solid black;border-collapse: collapse;padding-left: 3px;" align="left"><span t-field="l.compteur2"/></td>
                                                        <td style="  border: 1px solid black;border-collapse: collapse;padding-left: 3px;" align="left"><span t-field="l.sortie"/></td>
                                                        </t>
                                                    </tr>
                                                    <tr style="background-color: #d9d9d9">
                                                      <td colspan="3">Total Sortie </td>
                                                      <td><span t-esc="total_sortie"/></td>
                                                  </tr>
                                                </tbody>
                                            </table>
                                             </th>
                                    </tr>
                                    <tr>
                                        <td style="text-align: center; border: none;">
                                            <div style=" width: 100%;  margin: 23px  auto;  border: 1px solid;">
                                                  <t t-set="total_compta" t-value="total_sortie*prix_unitaire"/>
                                                  <t t-set="total_carburant_ca" t-value="total_carburant_ca+total_compta"/>
                                            Prix Unitaire <span t-esc="prix_unitaire"/> * <span t-esc="total_sortie"/> = <span t-esc="total_compta"/> Dhs
                                            </div>


                                        </td>
                                    </tr>
                        </thead>
                    </table>

                    </t>

                </div>
                <div class="row">
                    <table class="table table-condensed with_border">
                         <thead>
                                 <tr>
                                     <th style="background-color:#a8d08d;text-align: center;">Total Carburant</th>
                                 </tr>
                         </thead>
                        <tbody>
                            <td style="background-color: #d9d9d9;text-align: center;"><span t-esc="'{0:,.2f}'.format(float(total_carburant_ca)).replace(',', ' ') "/> Dhs</td>
                        </tbody>

                    </table>

                    
                </div>
                <!--partie 2-->
            <div class="row">
                <span class="name" > Citernes : </span>
                 <table class="table table-condensed with_border"  name="Volucompteurs">
                                                            <thead>
                                                                <tr class="titre">
                                                                    <th   align="center">Produit</th>
                                                                    <th  >Stock Initial</th>
                                                                    <th  >Entrées</th>
                                                                    <th  >Sorties</th>
                                                                    <th  >Stock Comptable</th>
                                                                    <th  >Stock Physique</th>
                                                                    <th >Coulage/ Excéden</th>
                                                                </tr>
                                                            </thead>

       <tbody>
                      <t t-foreach="set(product_carburant)" t-as="product">
                           <t t-set="stock_initiale" t-value="0" />
                           <t t-set="entree" t-value="0" />
                           <t t-set="sortie" t-value="0" />
                           <t t-set="stock_compatble" t-value="0" />
                          <t t-set="stock_physique" t-value="0" />
                          <t t-set="manquants_excedents" t-value="0" />

                                      <tr t-foreach="o.stock_ids" t-as="l">
                                          <t t-if="product.id==l.product_id.id">

                                             <td style="border-collapse: collapse;" align="left"><span t-field="l.reservoir_id.name"/> : <span t-field="l.product_id"/></td>
                                             <td style="border-collapse: collapse;" align="left"><span t-field="l.stock_initiale"/><t t-set="stock_initiale" t-value="stock_initiale+l.stock_initiale" /></td>
                                             <td style="border-collapse: collapse;" align="left"><span t-field="l.entree"/><t t-set="entree"  t-value="entree+l.entree"/></td>
                                             <td style="border-collapse: collapse;" align="left"><span t-field="l.sortie"/><t t-set="sortie"  t-value="sortie+l.sortie" /></td>
                                             <td style="border-collapse: collapse;" align="left"><span t-field="l.stock_compatble"/><t t-set="stock_compatble"  t-value="stock_compatble+l.stock_compatble" /></td>
                                             <td style="border-collapse: collapse;" align="left"><span t-field="l.stock_physique"/><t t-set="stock_physique"  t-value="stock_physique+l.stock_physique" /></td>
                                             <td style="border-collapse: collapse;" align="left"><span t-field="l.manquants_excedents"/><t t-set="manquants_excedents"  t-value="manquants_excedents+l.manquants_excedents" /></td>
                                          </t>
                                      </tr>
                           <tr style="    background-color: #d9d9d9;" >
                                    <td style="border-collapse: collapse;" align="left"> <span t-esc="product.name"/></td>
                                             <td style="border-collapse: collapse;" align="left"><span t-esc="stock_initiale"/> </td>
                                             <td style="border-collapse: collapse;" align="left"><span t-esc="entree"/> </td>
                                             <td style="border-collapse: collapse;" align="left"><span t-esc="sortie"/> </td>
                                             <td style="border-collapse: collapse;" align="left"><span t-esc="stock_compatble"/> </td>
                                             <td style="border-collapse: collapse;" align="left"><span t-esc="stock_physique"/> </td>
                                             <td style="border-collapse: collapse;" align="left"><span t-esc="manquants_excedents"/></td>
                               </tr>




                      </t>
                  </tbody>



                                                            <!--<tbody class="invoice_tbody">
                                                                <tr t-foreach="o.stock_ids" t-as="l">
                                                                    <td style="border-collapse: collapse;" align="left"><span t-field="l.reservoir_id.name"/> : <span t-field="l.product_id"/></td>
                                                                    <td style="border-collapse: collapse;" align="left"><span t-field="l.stock_initiale"/></td>
                                                                    <td style="border-collapse: collapse;" align="left"><span t-field="l.entree"/></td>
                                                                    <td style="border-collapse: collapse;" align="left"><span t-field="l.sortie"/></td>
                                                                    <td style="border-collapse: collapse;" align="left"><span t-field="l.stock_compatble"/></td>
                                                                    <td style="border-collapse: collapse;" align="left"><span t-field="l.stock_physique"/></td>
                                                                    <td style="border-collapse: collapse;" align="left"><span t-field="l.manquants_excedents"/></td>

                                                                </tr>
                                                            </tbody>-->
                                                        </table>

                <span class="name"> Recettes : </span><br />
                <t t-set="total_recettes" t-value="0"/>
                <t t-set="total_qte_net" t-value="0"/>
                <t t-set="total_amount_net" t-value="0"/>
                 <t t-set="paiement_ids" t-value="list()"/>


                  <t t-set="sous_total_recettes" t-value="0"/>
                  <t t-set="sous_total_qte_net" t-value="0"/>
                  <t t-set="sous_total_amount_net" t-value="0"/>
              <!-- <t  t-foreach="o.paiement_ids" t-as="l">
                   <t t-set="paiement_ids[l.type_paiement_id]" t-value="l"/>
               </t>-->

                <table class="table table-condensed with_border"  name="Recettes">
                                                            <thead>
                                                                <tr class="titre">
                                                                    <th style="    text-align: left;"  align="center">Type</th>
                                                                    <th  style="    text-align: left;"  >Montant</th>

                                                                    <th  style="    text-align: left;"  >Net</th>
                                                                     <th  style="    text-align: left;"  >Quantité</th>

                                                                </tr>
                                                            </thead>
                                                            <tbody class="invoice_tbody">
                                                                <t t-set="latst_type_paiement" t-value="0"/>
                                                                <t t-foreach="o.paiement_ids.sorted(key=lambda m: m.type_paiement_id.id)" t-as="l">
                                                                    <t t-if="latst_type_paiement == 0">
                                                                       <t t-set="latst_type_paiement" t-value="l.type_paiement_id.name"/>
                                                                         <!--  <t t-set="sous_total_recettes" t-value="l.montant"/>
                                                                          <t t-set="sous_total_qte_net" t-value="l.qte_net"/>
                                                                         <t t-set="sous_total_amount_net" t-value="l.amount_net"/>-->
                                                                    </t>
                                                                    <t t-if="latst_type_paiement != l.type_paiement_id.name">

                                                                         <tr>
                                                                              <td style="    background-color: #f3f3f3;">Total <span t-esc="latst_type_paiement"/> </td>
                                                                                    <td style="    background-color: #f3f3f3;"> <span t-esc="'{0:,.2f}'.format(float(sous_total_recettes)).replace(',', ' ')" /> Dhs</td>
                                                                                    <td style="    background-color: #f3f3f3;"> <span t-esc="'{0:,.2f}'.format(float(sous_total_amount_net)).replace(',', ' ')" />  Dhs</td>
                                                                             <td style="    background-color: #f3f3f3;"> <t t-if="sous_total_qte_net != 0"> <span t-esc="'{0:,.2f}'.format(float(sous_total_qte_net)).replace(',', ' ')" />  </t></td>
                                                                 </tr>
                                                                         <t t-set="latst_type_paiement" t-value="l.type_paiement_id.name"/>
                                                                          <t t-set="sous_total_recettes" t-value="0"/>
                                                                          <t t-set="sous_total_qte_net" t-value="0"/>
                                                                         <t t-set="sous_total_amount_net" t-value="0"/>
                                                                     </t>
                                                                    <t t-if="latst_type_paiement == l.type_paiement_id.name and latst_type_paiement != 0">
                                                                                          <t t-set="sous_total_recettes" t-value="sous_total_recettes+l.montant"/>
                                                                                          <t t-set="sous_total_qte_net" t-value="sous_total_qte_net+l.qte_net"/>
                                                                                           <t t-set="sous_total_amount_net" t-value="sous_total_amount_net+l.amount_net"/>
                                                                    </t>
                                                                <tr >

                                                                    <td  > <span t-field="l.type_paiement_id.name"/> <span t-field="l.client_id1.name"/></td>
                                                                    <td  > <span t-field="l.montant"/> dhs</td>

                                                                    <td> <span t-esc="'{0:,.2f}'.format(float(l.amount_net)).replace(',', ' ')"/> dhs</td>
                                                                     <td>
                                                                         <t t-if="l.qte_net != 0">
                                                                             <span t-esc="'{0:,.2f}'.format(float(l.qte_net)).replace(',', ' ')"/>
                                                                            </t></td>
                                                                    <t t-set="total_recettes" t-value="total_recettes+l.montant"/>
                                                                     <t t-set="total_qte_net" t-value="total_qte_net+l.qte_net"/>
                                                                    <t t-set="total_amount_net" t-value="total_amount_net+l.amount_net"/>
                                                                </tr>


                                                                </t>
                                                                <tr>
                                                                              <td style="    background-color: #f3f3f3;">Total <span t-esc="latst_type_paiement"/> </td>
                                                                              <td style="    background-color: #f3f3f3;"> <span t-esc="'{0:,.2f}'.format(float(sous_total_recettes)).replace(',', ' ')" /> Dhs</td>
                                                                              <td style="    background-color: #f3f3f3;"> <span t-esc="'{0:,.2f}'.format(float(sous_total_amount_net)).replace(',', ' ')" /> Dhs </td>
                                                                    <td style="    background-color: #f3f3f3;">  <t t-if="sous_total_qte_net != 0"><span t-esc="'{0:,.2f}'.format(float(sous_total_qte_net)).replace(',', ' ')" />  </t></td>

                                                                 </tr>
                                                                <tr>
                                                                    <td style="    background-color: #d9d9d9;">Total Recettes</td>
                                                                    <td style="    background-color: #d9d9d9;"> <span t-esc="'{0:,.2f}'.format(float(total_recettes)).replace(',', ' ')"/> Dhs</td>

                                                                    <td style="    background-color: #d9d9d9;"> <span t-esc="'{0:,.2f}'.format(float(total_amount_net)).replace(',', ' ')"/> Dhs</td>
                                                                          <td style="    background-color: #d9d9d9;"> <t t-if="total_qte_net != 0"><span t-esc="'{0:,.2f}'.format(float(total_qte_net)).replace(',', ' ')"/></t></td>
                                                                </tr>

                                                            </tbody>
                                                        </table>

                <span class="name"> Dépenses : </span>
                <t t-set="total_depense" t-value="0"/>
                <table class="table table-condensed with_border"  name="Recettes">
                                                            <thead>
                                                                <tr class="titre">
                                                                    <th style="    text-align: left;"  align="center">Type</th>
                                                                    <th  style="    text-align: left;"  >Montant</th>

                                                                </tr>
                                                            </thead>
                                                            <tbody class="invoice_tbody">
                                                                <tr t-foreach="o.depense_ids" t-as="l">

                                                                    <td  > <span t-field="l.type_paiement_id.name"/> <span t-field="l.produit_id.name"/> </td>
                                                                    <td  > <span t-field="l.montant"/> dhs</td>
                                                                    <t t-set="total_depense" t-value="total_depense+l.montant"/>
                                                                </tr>
                                                                <tr t-foreach="o.paiement_ids" t-as="l" t-if="l.commission">
                                                                       <td  > Commission : <span t-field="l.client_id.name"/>   </td>
                                                                       <td  > <span t-esc="'{0:,.2f}'.format(float(l.commission)).replace(',', ' ')"/> dhs</td>
                                                                    <t t-set="total_depense" t-value="total_depense+l.commission"/>
                                                                </tr>

                                                                <tr>
                                                                    <td style="    background-color: #d9d9d9;">Total Dépenses</td>
                                                                    <td style="    background-color: #d9d9d9;"> <span t-esc="'{0:,.2f}'.format(float(total_depense)).replace(',', ' ')"/> Dhs</td>
                                                                </tr>

                                                            </tbody>
                                                        </table>

                <span class="name"> Services : </span>
                <t t-set="total_services" t-value="0"/>
                <table class="table table-condensed with_border"  name="Recettes">
                                                            <thead>
                                                                <tr class="titre">
                                                                    <th style="    text-align: left;"  align="center">Type</th>
                                                                    <th  style="    text-align: left;"  >Montant</th>

                                                                </tr>
                                                            </thead>
                                                            <tbody class="invoice_tbody">
                                                                <tr t-foreach="o.vente_service_ids" t-as="l">

                                                                    <td  > <span t-field="l.type_paiement_id.name"/></td>
                                                                    <td  > <span t-field="l.montant"/> dhs</td>
                                                                    <t t-set="total_services" t-value="total_services+l.montant"/>
                                                                </tr>
                                                                <tr>
                                                                    <td style="    background-color: #d9d9d9;">Total services</td>
                                                                    <td style="    background-color: #d9d9d9;"> <span t-esc="total_services"/> Dhs</td>
                                                                </tr>

                                                            </tbody>
                                                        </table>


                <span class="name"> Crédit Client : </span>
                <t t-set="total_credit" t-value="0"/>
                <table class="table table-condensed with_border"  name="Recettes">
                                                            <thead>
                                                                <tr class="titre">
                                                                    <th style="    text-align: left;"  align="center">Nom Client</th>
                                                                    <th  style="    text-align: left;"  >Produit</th>
                                                                    <th  style="    text-align: left;"  >Quantité</th>
                                                                    <th  style="    text-align: left;"  >Montant</th>


                                                                </tr>
                                                            </thead>
                                                            <tbody class="invoice_tbody">
                                                                <tr t-foreach="o.boncommande_ids" t-as="l">

                                                                    <td  > <span t-field="l.client_id.name"/></td>
                                                                     <td  > <span t-field="l.product_id.name"/> </td>
                                                                     <td  > <span t-field="l.qt"/> </td>
                                                                     <td  > <span t-field="l.montant"/> dhs</td>

                                                                    <t t-set="total_credit" t-value="total_credit+l.montant"/>
                                                                </tr>
                                                                <tr>
                                                                    <td style="    background-color: #d9d9d9;" colspan="3">Total Crédit Client</td>
                                                                    <td style="    background-color: #d9d9d9;"> <span t-esc="total_credit"/> Dhs</td>
                                                                </tr>

                                                            </tbody>
                                                        </table>

                 <span class="name"> Règlements crédit : </span>
                <t t-set="total_reglements" t-value="0"/>
                <table class="table table-condensed with_border"  name="Recettes">
                                                            <thead>
                                                                <tr class="titre">
                                                                    <th style="    text-align: left;"  align="center">Nom Client</th>
                                                                    <th  style="    text-align: left;"  >Type De Paiement</th>

                                                                    <th  style="    text-align: left;"  >Montant</th>


                                                                </tr>
                                                            </thead>
                                                            <tbody class="invoice_tbody">
                                                                <tr t-foreach="o.reglement_credits_ids" t-as="l">

                                                                    <td  > <span t-field="l.client_id1.name"/></td>
                                                                     <td  > <span t-field="l.type_paiement_id.name"/> </td>
                                                                     <td  > <span t-field="l.montant"/> dhs</td>

                                                                    <t t-set="total_reglements" t-value="total_reglements+l.montant"/>
                                                                </tr>
                                                                <tr>
                                                                    <td style="    background-color: #d9d9d9;" colspan="2">Total Règlement Crédit</td>
                                                                    <td style="    background-color: #d9d9d9;"> <span t-esc="total_reglements"/> Dhs</td>
                                                                </tr>

                                                            </tbody>
                                                        </table>

<br /><br /><br />
                    <table class="table table-condensed">
                        <tr>
                            <td style="    vertical-align: text-top;">

                                 <table class="table table-condensed with_border"  name="Recettes">
                                                            <thead>
                                                                <tr class="titre" >
                                                                    <th style="text-align: center;" colspan="2" >Activité</th>
                                                                     </tr>
                                                            </thead>
                                                            <tbody class="activitee_tbody">
                                                                <tr style="background-color: #ffc001;">
                                                                    <td style="padding: 5px !important;">Type</td>
                                                                    <td  style="padding: 5px !important;">Montant</td>
                                                                </tr>
                                                                <tr>
                                                                    <td>Sortie Carburant</td>
                                                                    <td><span t-esc="'{0:,.2f}'.format(float(total_carburant_ca)).replace(',', ' ')"/> Dhs</td>
                                                                </tr>
                                                                <tr>
                                                                    <td>Règlement crédit</td>
                                                                    <td><span t-esc="'{0:,.2f}'.format(float(total_reglements)).replace(',', ' ') "/> Dhs</td>
                                                                </tr>
                                                                 <tr>
                                                                    <td>Services</td>
                                                                    <td> <span t-esc="'{0:,.2f}'.format(float(total_services)).replace(',', ' ')"/> Dhs</td>
                                                                </tr>
                                                                <tr  style="    background-color: #d9d9d9;">
                                                                    <td classe="footer">Montant global de l’activité</td>
                                                                    <td classe="footer"><t t-set="j" t-value="total_reglements+total_carburant_ca+total_services"/> <span t-esc="'{0:,.2f}'.format(float(j)).replace(',', ' ') "/> Dhs</td>
                                                                </tr>


                                                            </tbody>
                                                        </table>


                            </td>
                             <td>  </td>
                            <td>

                                   <table class="table table-condensed with_border"  name="Recettes">
                                                            <thead>
                                                                <tr class="titre" >
                                                                    <th style="text-align: center;" colspan="2" >Encaissements</th>
                                                                     </tr>
                                                            </thead>
                                                            <tbody class="">
                                                                <tr style="background-color: #ffc001;">
                                                                    <td>Type</td>
                                                                    <td>Montant</td>
                                                                </tr>
                                                                <tr>
                                                                    <td>Recette</td>
                                                                    <td><span t-esc="'{0:,.2f}'.format(float(total_amount_net)).replace(',', ' ')"/> Dhs</td>
                                                                </tr>
                                                                <tr>
                                                                    <td>Dépense</td>
                                                                    <td><span t-esc="'{0:,.2f}'.format(float(total_depense)).replace(',', ' ')"/> Dhs</td>
                                                                </tr>

                                                                 <tr>
                                                                    <td>Crédit client</td>
                                                                    <td> <span t-esc="'{0:,.2f}'.format(float(total_credit)).replace(',', ' ')"/> Dhs</td>
                                                                </tr>
                                                                <tr  style="    background-color: #d9d9d9;">
                                                                    <td  >Montant Global de caisse</td>
                                                                    <td ><t t-set="I" t-value="total_amount_net+total_depense+total_credit"/> <span t-esc="'{0:,.2f}'.format(float(I)).replace(',', ' ')"/> Dhs</td>
                                                                </tr>


                                                            </tbody>
                                                        </table>

                            </td>
                        </tr>
                    </table>
<br /><br /><br />
                  <table class="table table-condensed with_border"  name="Recettes">
                                                            <thead>
                                                                <tr class="titre">
                                                                    <th style="    text-align: center;"  align="center">Ecart de caisse</th>

                                                                </tr>
                                                            </thead>
                                                            <tbody class="invoice_tbody">
                                                                <tr  >

                                                                    <td  style="text-align: center;background-color: #d9d9d9;">
                                                                       <t t-set="k" t-value="j-I"/>
                                                                        <span t-esc="'{0:,.2f}'.format(float(k-total_reglements)).replace(',', ' ') "/> dhs</td>



                                                                </tr>


                                                            </tbody>
                                                        </table>




                </div>              
<!--Crédit, Régelement Crédit -->


                </div>
   </t>
        </template>
               <template id="rapport_journalier_station2">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="petrol_station_doosys.rapport_journalier_station_template2" />
                </t>
            </t>
        </template>
        
       </data>
    
</odoo>
